<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basics Â· Julia Data Format</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Julia Data Format</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Basics</a><ul class="internal"><li><a class="tocitem" href="#Reading-and-writing-data"><span>Reading and writing data</span></a></li><li><a class="tocitem" href="#File-interface"><span>File interface</span></a></li><li><a class="tocitem" href="#Groups"><span>Groups</span></a></li><li><a class="tocitem" href="#Gotchas"><span>Gotchas</span></a></li></ul></li><li><a class="tocitem" href="customserialization/">Custom Serialization</a></li><li><a class="tocitem" href="compression/">Compression</a></li><li><a class="tocitem" href="internals/">Internals &amp; Design</a></li><li><a class="tocitem" href="hdf5compat/">HDF5 Compatibility</a></li><li><a class="tocitem" href="advanced/">Advanced Usage</a></li><li><a class="tocitem" href="legacy/">Legacy</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Basics</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Basics</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaIO/JLD2.jl" title="Edit on GitHub"><span class="docs-icon fab">ï‚›</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Julia-Data-Format-JLD2"><a class="docs-heading-anchor" href="#Julia-Data-Format-JLD2">Julia Data Format - JLD2</a><a id="Julia-Data-Format-JLD2-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-Data-Format-JLD2" title="Permalink"></a></h1><p>JLD2 saves and loads Julia data structures in a format comprising a subset of HDF5, without any dependency on the HDF5 C library. It typically outperforms <a href="https://github.com/JuliaIO/JLD.jl">the JLD package</a> (sometimes by multiple orders of magnitude) and often outperforms Julia&#39;s built-in serializer. While other HDF5 implementations supporting HDF5 File Format Specification Version 3.0 (i.e. libhdf5 1.10 or later) should be able to read the files that JLD2 produces, JLD2 is likely to be incapable of reading files created or modified by other HDF5 implementations. JLD2 does not aim to be backwards or forwards compatible with the JLD package.</p><h2 id="Reading-and-writing-data"><a class="docs-heading-anchor" href="#Reading-and-writing-data">Reading and writing data</a><a id="Reading-and-writing-data-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-and-writing-data" title="Permalink"></a></h2><h3 id="A-new-interface:-jldsave"><a class="docs-heading-anchor" href="#A-new-interface:-jldsave">A new interface: jldsave</a><a id="A-new-interface:-jldsave-1"></a><a class="docs-heading-anchor-permalink" href="#A-new-interface:-jldsave" title="Permalink"></a></h3><p><code>jldsave</code> makes use of julia&#39;s keyword argument syntax to store files, thus leveraging the parser and not having to rely on macros. To use it, write</p><pre><code class="language-julia">x = 1
y = 2
z = 42

# The simplest case:
jldsave(&quot;example.jld2&quot;; x, y, z)
# it is equivalent to 
jldsave(&quot;example.jld2&quot;; x=x, y=y, z=z)

# You can assign new names selectively
jldsave(&quot;example.jld2&quot;; x, a=y, z)

# and if you want to confuse your future self and everyone else, do
jldsave(&quot;example.jld2&quot;; z=x, x=y, y=z)</code></pre><p>Compression and non-default IO types may be set via positional arguments.</p><h3 id="save_object-and-load_object-functions"><a class="docs-heading-anchor" href="#save_object-and-load_object-functions"><code>save_object</code> and <code>load_object</code> functions</a><a id="save_object-and-load_object-functions-1"></a><a class="docs-heading-anchor-permalink" href="#save_object-and-load_object-functions" title="Permalink"></a></h3><p>If only a single object needs to stored and loaded from a file, one can use <code>save_object</code> and <code>load_object</code> functions.</p><article class="docstring"><header><a class="docstring-binding" id="JLD2.save_object" href="#JLD2.save_object"><code>JLD2.save_object</code></a> â€” <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">save_object(filename, x)</code></pre><p>Stores an object <code>x</code> in a new JLD2 file at <code>filename</code>. If a file exists at this path, it will be overwritten.</p><p>Since the JLD2 format requires that all objects have a name, the object will be stored as <code>single_sotred_object</code>. If you want to store more than one object, use <a href="legacy/#JLD2.@save"><code>@save</code></a> macro, <a href="internals/#JLD2.jldopen"><code>jldopen</code></a> or the FileIO API.</p><p><strong>Example</strong></p><p>To save the string <code>hello</code> to the JLD2 file example.jld2:</p><pre><code class="language-none">hello = &quot;world&quot;
save_object(&quot;example.jld2&quot;, hello)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaIO/JLD2.jl">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JLD2.load_object" href="#JLD2.load_object"><code>JLD2.load_object</code></a> â€” <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">load_object(filename)</code></pre><p>Returns the only available object from the JLD2 file <code>filename</code> (The stored object name is inconsequential). If the file contains more than one or no objects, the function throws an <code>ArgumentError</code>.</p><p>For loading more than one object, use <a href="legacy/#JLD2.@load"><code>@load</code></a> macro, <a href="internals/#JLD2.jldopen"><code>jldopen</code></a> or the FileIO API.</p><p><strong>Example</strong></p><p>To load the only object from the JLD2 file example.jld2:</p><pre><code class="language-none">hello = &quot;world&quot;
save_object(&quot;example.jld2&quot;, hello)
hello_loaded = load_object(&quot;example.jld2&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaIO/JLD2.jl">source</a></section></article><h3 id="save-and-load-functions"><a class="docs-heading-anchor" href="#save-and-load-functions"><code>save</code> and <code>load</code> functions</a><a id="save-and-load-functions-1"></a><a class="docs-heading-anchor-permalink" href="#save-and-load-functions" title="Permalink"></a></h3><p>The <code>save</code> and <code>load</code> functions, provided by <a href="https://github.com/JuliaIO/FileIO.jl">FileIO</a>, provide a mechanism to read and write data from a JLD2 file. To use these functions, you may either write <code>using FileIO</code> or <code>using JLD2</code>. FileIO will determine the correct package automatically.</p><p>The <code>save</code> function accepts an <code>AbstractDict</code> yielding the key/value pairs, where the key is a string representing the name of the dataset and the value represents its contents:</p><pre><code class="language-julia">using FileIO
save(&quot;example.jld2&quot;, Dict(&quot;hello&quot; =&gt; &quot;world&quot;, &quot;foo&quot; =&gt; :bar))</code></pre><p>The <code>save</code> function can also accept the dataset names and contents as arguments:</p><pre><code class="language-julia">save(&quot;example.jld2&quot;, &quot;hello&quot;, &quot;world&quot;, &quot;foo&quot;, :bar)</code></pre><p>When using the <code>save</code> function, the file extension must be <code>.jld2</code>, since the extension <code>.jld</code> currently belongs to the previous JLD package.</p><p>If called with a filename argument only, the <code>load</code> function loads all datasets from the given file into a Dict:</p><pre><code class="language-julia">load(&quot;example.jld2&quot;) # -&gt; Dict{String,Any}(&quot;hello&quot; =&gt; &quot;world&quot;, &quot;foo&quot; =&gt; :bar)</code></pre><p>If called with a single dataset name, <code>load</code> returns the contents of that dataset from the file:</p><pre><code class="language-julia">load(&quot;example.jld2&quot;, &quot;hello&quot;) # -&gt; &quot;world&quot;</code></pre><p>If called with multiple dataset names, <code>load</code> returns the contents of the given datasets as a tuple:</p><pre><code class="language-julia">load(&quot;example.jld2&quot;, &quot;hello&quot;, &quot;foo&quot;) # -&gt; (&quot;world&quot;, :bar)</code></pre><h2 id="File-interface"><a class="docs-heading-anchor" href="#File-interface">File interface</a><a id="File-interface-1"></a><a class="docs-heading-anchor-permalink" href="#File-interface" title="Permalink"></a></h2><p>It is also possible to interact with JLD2 files using a file-like interface. The <code>jldopen</code> function accepts a file name and an argument specifying how the file should be opened:</p><pre><code class="language-julia">using JLD2

f = jldopen(&quot;example.jld2&quot;, &quot;r&quot;)  # open read-only (default)
f = jldopen(&quot;example.jld2&quot;, &quot;r+&quot;) # open read/write, failing if no file exists
f = jldopen(&quot;example.jld2&quot;, &quot;w&quot;)  # open read/write, overwriting existing file
f = jldopen(&quot;example.jld2&quot;, &quot;a+&quot;) # open read/write, preserving contents of existing file or creating a new file</code></pre><p>Data can be written to the file using <code>write(f, &quot;name&quot;, data)</code> or <code>f[&quot;name&quot;] = data</code>, or read from the file using <code>read(f, &quot;name&quot;)</code> or <code>f[&quot;name&quot;]</code>. When you are done with the file, remember to call <code>close(f)</code>.</p><p>Like <code>open</code>, <code>jldopen</code> also accepts a function as the first argument, permitting <code>do</code>-block syntax:</p><pre><code class="language-julia">jldopen(&quot;example.jld2&quot;, &quot;w&quot;) do file
    file[&quot;bigdata&quot;] = randn(5)
end</code></pre><h2 id="Groups"><a class="docs-heading-anchor" href="#Groups">Groups</a><a id="Groups-1"></a><a class="docs-heading-anchor-permalink" href="#Groups" title="Permalink"></a></h2><p>It is possible to construct groups within a JLD2 file, which may or may not be useful for organizing your data. You can create groups explicitly:</p><pre><code class="language-julia">jldopen(&quot;example.jld2&quot;, &quot;w&quot;) do file
    mygroup = JLD2.Group(file, &quot;mygroup&quot;)
    mygroup[&quot;mystuff&quot;] = 42
end</code></pre><p>or implicitly, by saving a variable with a name containing slashes as path delimiters:</p><pre><code class="language-julia">jldopen(&quot;example.jld2&quot;, &quot;w&quot;) do file
    file[&quot;mygroup/mystuff&quot;] = 42
end
# or save(&quot;example.jld2&quot;, &quot;mygroup/mystuff&quot;, 42)</code></pre><p>Both of these examples yield the same group structure, which you can see at the REPL:</p><pre><code class="language-none">julia&gt; file = jldopen(&quot;example.jld2&quot;, &quot;r&quot;)
JLDFile /Users/simon/example.jld2 (read-only)
 â””â”€ðŸ“‚ mygroup
    â””â”€ðŸ”¢ mystuff</code></pre><p>Similarly, you can access groups directly:</p><pre><code class="language-julia">jldopen(&quot;example.jld2&quot;, &quot;r&quot;) do file
    @assert file[&quot;mygroup&quot;][&quot;mystuff&quot;] == 42
end</code></pre><p>or using slashes as path delimiters:</p><pre><code class="language-julia">@assert load(&quot;example.jld2&quot;, &quot;mygroup/mystuff&quot;) == 42</code></pre><h2 id="Gotchas"><a class="docs-heading-anchor" href="#Gotchas">Gotchas</a><a id="Gotchas-1"></a><a class="docs-heading-anchor-permalink" href="#Gotchas" title="Permalink"></a></h2><h3 id="Objects-are-cached-during-loading"><a class="docs-heading-anchor" href="#Objects-are-cached-during-loading">Objects are cached during loading</a><a id="Objects-are-cached-during-loading-1"></a><a class="docs-heading-anchor-permalink" href="#Objects-are-cached-during-loading" title="Permalink"></a></h3><p>JLD2 caches objects during loading. It may give you the same object twice. This can lead to surprising results if you edit loaded arrays. Note, the underlying file is not being edited!</p><pre><code class="language-none">julia&gt; jldsave(&quot;demo.jld2&quot;, a=zeros(2))

julia&gt; f = jldopen(&quot;demo.jld2&quot;)
JLDFile /home/isensee/demo.jld2 (read-only)
 â””â”€ðŸ”¢ a

julia&gt; a = f[&quot;a&quot;] # bind loaded array to name `a`
2-element Vector{Float64}:
 0.0
 0.0

julia&gt; a[1] = 42; # editing the underlying array

julia&gt; f[&quot;a&quot;]
2-element Vector{Float64}:
 42.0
  0.0

julia&gt; a=nothing # remove all references to the loaded array

julia&gt; GC.gc(true) # call GC to remove the cache

julia&gt; f[&quot;a&quot;] # a new copy is loaded from the file
2-element Vector{Float64}:
 0.0
 0.0</code></pre><h3 id="Cross-compatibility"><a class="docs-heading-anchor" href="#Cross-compatibility">Cross-compatibility</a><a id="Cross-compatibility-1"></a><a class="docs-heading-anchor-permalink" href="#Cross-compatibility" title="Permalink"></a></h3><p>JLD2 tries to write files in a way that allows you to load them on different operating systems and in particular both on 32bit and 64bit systems. However, many julia structs may be inherently different on different architectures making this task impossible. In particular, moving data from a 64bit system to a 32bit system is only guaranteed to work for basic datatypes.</p><h3 id="Security"><a class="docs-heading-anchor" href="#Security">Security</a><a id="Security-1"></a><a class="docs-heading-anchor-permalink" href="#Security" title="Permalink"></a></h3><p>Beware of opening JLD2 files from untrusted sources. A malicious file may execute code on your computer. See e.g. <a href="https://github.com/JuliaIO/JLD2.jl/issues/117">here</a>. To check a file, you can use <a href="https://github.com/JonasIsensee/JLD2DebugTools.jl">JLD2DebugTools.jl</a> to view what kinds of objects are stored.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="customserialization/">Custom Serialization Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 10 September 2022 08:33">Saturday 10 September 2022</span>. Using Julia version 1.8.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
